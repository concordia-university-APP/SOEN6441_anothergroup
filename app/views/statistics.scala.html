@import java.util
@(wordFrequency: util.Map[String, Long], query: String)

@main("Word Frequency Statistics for ") {
    <head>
        <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/styles.css")">
        <script>
                let currentPage = 1;
                const rowsPerPage = 10;

                function displayTable(page) {
                    const rows = document.querySelectorAll("tbody tr");
                    const totalRows = rows.length;
                    const totalPages = Math.ceil(totalRows / rowsPerPage);

                    // Hide all rows
                    rows.forEach((row) => {
                        row.style.display = "none"; // Hide all rows initially
                    });

                    // Calculate the starting and ending row index for the current page
                    const start = (page - 1) * rowsPerPage;
                    const end = start + rowsPerPage;

                    // Show only the rows for the current page
                    for (let i = start; i < end && i < totalRows; i++) {
                        rows[i].style.display = ""; // Show rows within the range
                    }

                    // Update pagination buttons
                    document.getElementById("prevBtn").style.display = page === 1 ? "none" : "inline";
                    document.getElementById("nextBtn").style.display = page === totalPages ? "none" : "inline";
                    document.getElementById("pageInfo").textContent = `Page ${page} of ${totalPages}`;
                }

                function changePage(offset) {
                    currentPage += offset;
                    displayTable(currentPage);
                }

                window.onload = () => {
                    displayTable(currentPage);
                };
        </script>
    </head>
    <body>
        <h1>Word Frequency Statistics for "@query"</h1>
        <p>Below are the word frequency statistics for the search query: "<strong>@query</strong>"</p>

        @if(wordFrequency.isEmpty) {
            <p>No data available for this search query.</p>
        } else {
            <table>
                <thead>
                    <tr>
                        <th>Word</th>
                        <th>Frequency</th>
                    </tr>
                </thead>
                <tbody>
                @for((word, count) <- wordFrequency) {
                    <tr>
                        <td>@word</td>
                        <td>@count</td>
                    </tr>
                }
                </tbody>
            </table>
            <div>
                <button id="prevBtn" onclick="changePage(-1)">Previous</button>
                <span id="pageInfo"></span>
                <button id="nextBtn" onclick="changePage(1)">Next</button>
            </div>
        }
    </body>
}
